(this["webpackJsonpcsv-test"]=this["webpackJsonpcsv-test"]||[]).push([[0],{18:function(e,t,n){e.exports={btnLoad:"parse_btnLoad__zwAtY",errorBlock:"parse_errorBlock__19EUx"}},2:function(e,t,n){e.exports={wrapBlock:"Table_wrapBlock__3m5Bg",tableClients:"Table_tableClients__250uo",error:"Table_error__4Mi-2"}},29:function(e,t,n){e.exports={iconSpin:"Spinner_iconSpin__DshYl","icon-spin":"Spinner_icon-spin__3WqPZ"}},35:function(e,t,n){},36:function(e,t,n){},39:function(e,t){},41:function(e,t){},52:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(25),o=n.n(a),i=(n(35),n(36),n(3)),s=n(11),l=n(26),u=n(54),b=n(10),f=n(28),d=n.n(f),j=n(2),h=n.n(j),p=n(0);function x(e){var t=e.data,n=e.headers,c=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(console.log(!0),c.current){var e=n.map((function(e){return e.includes(" ")?e.split(" ").join("."):e})).reduce((function(e,t){if("ID"===t||"Full.Name"===t||"License.states"===t||"Duplicate.with"===t)return e;var n=c.current.querySelectorAll(".".concat(t));return Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},t,n))}),{});for(var t in e)r(t,e)}function r(e,t){var n=t[e];switch(e){case"Phone":n.forEach((function(e){12===e.textContent.length&&"+1"===e.textContent.slice(0,2)||e.classList.add(h.a.error)}));break;case"Email":n.forEach((function(e){/^([a-z0-9_.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/.test(e.textContent)||e.classList.add(h.a.error)}));break;case"Age":n.forEach((function(e){(!Number.isInteger(Number(e.textContent))||e.textContent<21)&&e.classList.add(h.a.error)}));break;case"Experience":n.forEach((function(e,n){(e.textContent<0||+e.textContent>+t.Age[n].textContent)&&e.classList.add(h.a.error)}));break;case"Yearly.Income":n.forEach((function(e){(isNaN(e.textContent)||e.textContent<0||e.textContent>1e6)&&e.classList.add(h.a.error)}));break;case"Has.children":n.forEach((function(e){"TRUE"!==e.textContent&&"FALSE"!==e.textContent&&""!==e.textContent&&e.classList.add(h.a.error)}));break;case"License.number":n.forEach((function(e){6===e.textContent.length&&/^[A-Za-z0-9]+$/.test(e.textContent)||e.classList.add(h.a.error)}));break;case"Expiration.date":n.forEach((function(e){(function(e){if(!d()(e,"boolean"))return!0;if(e.includes("-")){var t=e.split("-");if(4===t[0].length)return a(t[0],t[1],t[2])}if(e.includes("/")){var n=e.split("/");if(4===n[2].length)return a(n[2],n[0],n[1])}})(e.textContent)&&e.classList.add(h.a.error)}))}}function a(e,t,n){return!(new Date(e,t-1,n)-Date.now()>0)}}),[n]),Object(p.jsx)("div",{className:h.a.wrapBlock,children:Object(p.jsxs)("table",{className:h.a.tableClients,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"ID"}),n.map((function(e,t){return Object(p.jsx)("th",{children:e},t)}))]})}),Object(p.jsx)("tbody",{ref:c,children:t.map((function(e){var t=Object.keys(e);return Object(p.jsx)("tr",{children:t.map((function(t,n){return Object(p.jsx)("td",{className:t,children:e[t]},n)}))},e.ID)}))})]})})}var m=n(30),O=n(29),v=n.n(O);function C(e){var t=e.classNames,n=void 0===t?"":t;return Object(p.jsx)(m.a,{className:"".concat(v.a.iconSpin," ").concat(n)})}var E=n(18),_=n.n(E),L="idle",k="pending",g="error",N="success";function w(){var e=Object(r.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),o=Object(s.a)(a,2),b=o[0],f=o[1],d=Object(r.useState)(L),j=Object(s.a)(d,2),h=j[0],m=j[1],O=Object(r.useRef)(),v=function(e){O.current&&O.current.open(e)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.a,{ref:O,onFileLoad:function(e){m(k);var t=e.map((function(e){return e.data.map((function(e){return e.trim()}))}));t[0].push("Duplicate with"),f(t[0]);var n=t.map((function(e){return e.join(";")})).join("\n"),r=Object(u.a)(";").parse(n);if(r.reduce((function(e,t){return t["Full Name"]&&t.Phone&&t.Email||(e=!0),e}),!1))m(g);else{var a=r.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{Phone:(r=e.Phone,10===r.length?"+1"+r:11===r.length&&"1"===r.slice(0,1)?"+"+r:r),Email:e.Email.toLowerCase(),"Yearly Income":(n=e["Yearly Income"],Number(n)?Number(n).toFixed(2):n),"Has children":e["Has children"].toUpperCase(),"License states":(t=e["License states"],t.includes("|")?t.split("|").map((function(e){return e.trim().slice(0,2).toUpperCase()})).join(", "):t.slice(0,2).toUpperCase())});var t,n,r})).map((function(e,t){return Object(i.a)(Object(i.a)({ID:t+1},e),{},{"Duplicate with":[]})}));a.forEach((function(e){var t=e.ID,n=e.Phone,r=e.Email;a.forEach((function(e){e.ID===t||e.Phone!==n&&e.Email!==r||(e["Duplicate with"]=t)}))})),c(a),m(N)}},onError:function(e,t,n,r){console.log(e,t,n,r)},children:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{type:"button",onClick:v,className:_.a.btnLoad,children:"Import users"})})}}),h===N&&Object(p.jsx)(x,{data:n,headers:b}),h===g&&Object(p.jsx)("div",{className:_.a.errorBlock,children:Object(p.jsx)("h1",{children:"File format is not correct"})}),h===k&&Object(p.jsx)(C,{})]})}var D=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(w,{})})};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(D,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.e7872598.chunk.js.map