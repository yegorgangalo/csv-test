(this["webpackJsonpcsv-test"]=this["webpackJsonpcsv-test"]||[]).push([[0],{18:function(e,t,n){e.exports={btnLoad:"parse_btnLoad__zwAtY",errorBlock:"parse_errorBlock__19EUx"}},2:function(e,t,n){e.exports={wrapBlock:"Table_wrapBlock__3m5Bg",tableClients:"Table_tableClients__250uo",error:"Table_error__4Mi-2"}},28:function(e,t,n){e.exports={iconSpin:"Spinner_iconSpin__DshYl","icon-spin":"Spinner_icon-spin__3WqPZ"}},34:function(e,t,n){},35:function(e,t,n){},38:function(e,t){},40:function(e,t){},51:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(25),i=n.n(a),o=(n(34),n(35),n(3)),s=n(11),u=n(26),l=n(53),b=n(10),f=n(2),d=n.n(f),j=n(0);function h(e){var t=e.data,n=e.headers,c=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(c.current){var e=n.map((function(e){return e.includes(" ")?e.split(" ").join("."):e})).reduce((function(e,t){if("ID"===t||"Full.Name"===t||"License.states"===t||"Duplicate.with"===t)return e;var n=c.current.querySelectorAll(".".concat(t));return Object(o.a)(Object(o.a)({},e),{},Object(b.a)({},t,n))}),{});for(var t in e)r(t,e)}function r(e,t){var n=t[e];switch(e){case"Phone":n.forEach((function(e){12===e.textContent.length&&"+1"===e.textContent.slice(0,2)||e.classList.add(d.a.error)}));break;case"Email":n.forEach((function(e){/^([a-z0-9_.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/.test(e.textContent)||e.classList.add(d.a.error)}));break;case"Age":n.forEach((function(e){(!Number.isInteger(Number(e.textContent))||e.textContent<21)&&e.classList.add(d.a.error)}));break;case"Experience":n.forEach((function(e,n){(e.textContent<0||+e.textContent>+t.Age[n].textContent)&&e.classList.add(d.a.error)}));break;case"Yearly.Income":n.forEach((function(e){(isNaN(e.textContent)||e.textContent<0||e.textContent>1e6)&&e.classList.add(d.a.error)}));break;case"Has.children":n.forEach((function(e){"TRUE"!==e.textContent&&"FALSE"!==e.textContent&&""!==e.textContent&&e.classList.add(d.a.error)}));break;case"License.number":n.forEach((function(e){6===e.textContent.length&&/^[A-Za-z0-9]+$/.test(e.textContent)||e.classList.add(d.a.error)}));break;case"Expiration.date":n.forEach((function(e){(function(e){if(e.includes("-")){var t=e.split("-");if(4===t[0].length)return a(t[0],t[1],t[2])}if(e.includes("/")){var n=e.split("/");if(4===n[2].length)return a(n[2],n[0],n[1])}return!0})(e.textContent)&&e.classList.add(d.a.error)}))}}function a(e,t,n){return t>12||t<1||n>31||n<1||!(new Date(e,t-1,n)-Date.now()>0)}}),[n]),Object(j.jsx)("div",{className:d.a.wrapBlock,children:Object(j.jsxs)("table",{className:d.a.tableClients,children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"ID"}),n.map((function(e,t){return Object(j.jsx)("th",{children:e},t)}))]})}),Object(j.jsx)("tbody",{ref:c,children:t.map((function(e){var t=Object.keys(e);return Object(j.jsx)("tr",{children:t.map((function(t,n){return Object(j.jsx)("td",{className:t,children:e[t]},n)}))},e.ID)}))})]})})}var p=n(29),x=n(28),m=n.n(x);function O(e){var t=e.classNames,n=void 0===t?"":t;return Object(j.jsx)(p.a,{className:"".concat(m.a.iconSpin," ").concat(n)})}var v=n(18),C=n.n(v),E="idle",_="pending",L="error",k="success";function N(){var e=Object(r.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),i=Object(s.a)(a,2),b=i[0],f=i[1],d=Object(r.useState)(E),p=Object(s.a)(d,2),x=p[0],m=p[1],v=Object(r.useRef)(),N=function(e){v.current&&v.current.open(e)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u.a,{ref:v,onFileLoad:function(e){m(_);var t=e.map((function(e){return e.data.map((function(e){return e.trim()}))}));t[0].push("Duplicate with"),f(t[0]);var n=t.map((function(e){return e.join(";")})).join("\n"),r=Object(l.a)(";").parse(n);if(r.reduce((function(e,t){return t["Full Name"]&&t.Phone&&t.Email||(e=!0),e}),!1))m(L);else{var a=r.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{Phone:(r=e.Phone,10===r.length?"+1"+r:11===r.length&&"1"===r.slice(0,1)?"+"+r:r),Email:e.Email.toLowerCase(),"Yearly Income":(n=e["Yearly Income"],Number(n)?Number(n).toFixed(2):n),"Has children":e["Has children"].toUpperCase(),"License states":(t=e["License states"],t.includes("|")?t.split("|").map((function(e){return e.trim().slice(0,2).toUpperCase()})).join(", "):t.slice(0,2).toUpperCase())});var t,n,r})).map((function(e,t){return Object(o.a)(Object(o.a)({ID:t+1},e),{},{"Duplicate with":[]})}));a.forEach((function(e){var t=e.ID,n=e.Phone,r=e.Email;a.forEach((function(e){e.ID===t||e.Phone!==n&&e.Email!==r||(e["Duplicate with"]=t)}))})),c(a),m(k)}},onError:function(e,t,n,r){console.log(e,t,n,r)},children:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{type:"button",onClick:N,className:C.a.btnLoad,children:"Import users"})})}}),x===k&&Object(j.jsx)(h,{data:n,headers:b}),x===L&&Object(j.jsx)("div",{className:C.a.errorBlock,children:Object(j.jsx)("h1",{children:"File format is not correct"})}),x===_&&Object(j.jsx)(O,{})]})}var g=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(N,{})})};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.5d3f83ed.chunk.js.map